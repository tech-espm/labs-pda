<input type="hidden" id="id" name="id" value="<%=(item ? item.id : 0) %>" />

<div class="form-group">
    <label for="nome">Nome</label>
    <input id="nome" name="nome" maxlength="85" class="form-control" type="text" spellcheck="false"  value="<%=(item ? item.nome : '') %>" <%=(item ? 'readonly="readonly"' : '') %>/>
</div>
<div class="form-group mb-0"> 
    <label for="descricao">Descrição</label>		
	<textarea id ="descricao" rows="10" cols="40" name="descricao" class="form-control" type="text" spellcheck="false" ><%=(item ? item.descricao : '') %></textarea>
</div>

<%- contentFor("scripts") %>

<script type="text/javascript">
	//<![CDATA[
	"use strict";

	$("#form").validate({
		rules: {
			nome: {
				required: true
			},
			descricao: {
				required: true
			},
		},

		submitHandler: function (form) {
			if (fetchAtivo) {
				return;
			}
			Swal.wait();

			//<% if (item) { %>

			JsonWebApi.postFormData("<%- root %>/api/narrativa/editar", form, function (response) {
				if (response.success)
					Swal.success("Narrativa alterada com sucesso! " + emoji.happy);
				else
					Swal.error(response.value + " " + emoji.sad);
			});

			//<% } else { %>

			JsonWebApi.postFormData("<%- root %>/api/narrativa/criar", form, function (response) {
				if (response.success) {
					resetForm("#form");
					Swal.success("Narrativa criada com sucesso! " + emoji.happy);
				} else {
					Swal.error(response.value + " " + emoji.sad);
				}
			});

			//<% } %>
		}
	});
	//]]>
</script>